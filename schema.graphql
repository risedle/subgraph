type RiseToken @entity {
  # token address
  id: ID! # âœ… added 

  # mirrored from the smart contract
  symbol: String! # âœ… added 
  name: String! # âœ… added 
  decimals: BigInt! # âœ… added 

  # used for other stats like marketcap
  totalSupply: BigInt! # âœ… added 

  # token specific volume (mint + redeem)
  tradeVolume: BigDecimal! # âœ… added 
  tradeVolumeUSD: BigDecimal! # âœ… added 

  # transactions mint + redeem
  txCount: BigInt! # âœ… added 

  lastRebalance: Rebalance # ğŸ”´ not implemented yet
}

type User @entity {
  id: ID! # âœ… added 
  mints: [Mint!] @derivedFrom(field: "sender") # âœ… added 
  redeems: [Burn!] @derivedFrom(field: "sender") # âœ… added 
  deposits: [Deposit!] @derivedFrom(field: "sender") # âœ… added 
  withdrawals: [Withdraw!] @derivedFrom(field: "sender") # âœ… added 

  lastTransactionTimestamp: BigInt!
}

type DailyActiveUser @entity {
  id: ID! # timestamp as Date
  timestamp: BigInt!
  uniqueUsersCount: BigInt!
  users: [User!]!
}

type MonthlyActiveUser @entity {
  id: ID! # timestamp as Date
  timestamp: BigInt!
  uniqueUsersCount: BigInt!
  users: [User!]!
}

type Transaction @entity {
  id: ID! # txn hash # âœ… added 
  blockNumber: BigInt! # âœ… added 
  timestamp: BigInt! # âœ… added 
  mints: [Mint!] @derivedFrom(field: "transaction") # âœ… added
  redeems: [Burn!] @derivedFrom(field: "transaction") # âœ… added
  deposits: [Deposit!] @derivedFrom(field: "transaction") # âœ… added
  withdrawals: [Withdraw!] @derivedFrom(field: "transaction") # âœ… added
  rebalances: [Rebalance!] @derivedFrom(field: "transaction") # âœ… added
}

# RiseTokenMinted event
type Mint @entity {
  # transaction hash
  id: ID! # âœ… added
  transaction: Transaction! # âœ… added 
  timestamp: BigInt!  # âœ… added 
  token: RiseToken! # âœ… added 

  # populated from the primary Transfer event
  to: Bytes # âœ… added 

  # populated from the RiseTokenMinted event
  sender:  User! # âœ… added 
  mintedAmount: BigDecimal! # âœ… added 
  # derived amount based on available prices of tokens
  amountUSD: BigDecimal! # âœ… added 
}

# RiseTokenBurned event
type Burn @entity {
  # transaction hash
  id: ID! # âœ… added
  transaction: Transaction! # âœ… added 
  timestamp: BigInt! # âœ… added 
  token: RiseToken! # âœ… added 

  # populated from the RiseTokenBurned event
  sender:  User! # âœ… added 
  ethAmount: BigDecimal! # âœ… added 

  # derived amount based on available prices of tokens
  amountUSD: BigDecimal! # âœ… added 
}

# SupplyAdded event
type Deposit @entity {
  # transaction hash
  id: ID! # âœ… added
  transaction: Transaction! # âœ… added 
  timestamp: BigInt! # âœ… added 
  tokenIn: Bytes # âœ… added 

  # populated from the SupplyAdded event
  sender: User! # âœ… added 
  mintedAmount: BigDecimal! # âœ… added 

  # derived amount based on available prices of tokens
  amountUSD: BigDecimal! # âœ… added 
}

# SupplyRemoved event
type Withdraw @entity {
  # transaction hash
  id: ID! # âœ… added
  transaction: Transaction! # âœ… added 
  timestamp: BigInt! # âœ… added 
  tokenOut: Bytes # âœ… added 

  # populated from the SupplyRemoved event
  sender: User! # âœ… added 
  rvTokenAmount: BigDecimal # âœ… added 
  exchangeRate: BigDecimal # âœ… added 
  tokenOutAmount: BigDecimal! # âœ… added 

  # derived amount based on available prices of tokens
  amountUSD: BigDecimal! # âœ… added 
}

# RiseTokenRebalanced event
type Rebalance @entity {
  # transaction hash
  id: ID! # âœ… added
  transaction: Transaction! # âœ… added 
  timestamp: BigInt! # âœ… added 
  token: RiseToken! # âœ… added 

  # populated from the SupplyRemoved event
  executor: Bytes # âœ… added 
  previousLeverageRatio: BigDecimal # âœ… added 
  leverageRatio: BigDecimal # âœ… added 

  # ğŸ‘ sementara di skip dulu dipikir nanti ğŸ‘ entities nya tetep + bikin lastrebalance di rise token
	previousTotalCollateral: BigDecimal # ğŸ”´ not implemented yet 
  totalCollateral: BigDecimal # ğŸ”´ not implemented yet
  previousTotalDebt: BigDecimal # ğŸ”´ not implemented yet
  totalDebt: BigDecimal # ğŸ”´ not implemented yet
  totalRepayment: BigDecimal # ğŸ”´ not implemented yet
  totalBorrow: BigDecimal # ğŸ”´ not implemented yet
}

# Data accumulated and condensed into day stats for all of RiseToken
type RiseTokenHourData @entity {
  id: ID! # âœ… added 
  date: Int! # âœ… added 

  hourlyVolumeETH: BigDecimal!  # âœ… added 
  hourlyVolumeUSD: BigDecimal! # âœ… added 
  hourlyFeeETH: BigDecimal! # âœ… added 
  hourlyFeeUSD: BigDecimal!  # âœ… added 

  totalVolumeETH: BigDecimal! # âœ… added 
  totalAUMETH: BigDecimal!  # âœ… added 
  totalVolumeUSD: BigDecimal! # âœ… added 
  totalAUMUSD: BigDecimal!  # âœ… added 

  txCount: BigInt! # âœ… added 
}

# Data accumulated and condensed into day stats for all of RiseToken
type RiseTokenDayData @entity {
  id: ID! # âœ… added 
  date: Int! # âœ… added 

  dailyVolumeETH: BigDecimal! # âœ… added 
  dailyVolumeUSD: BigDecimal! # âœ… added 

  totalVolumeETH: BigDecimal! # âœ… added 
  totalAUMETH: BigDecimal!  # âœ… added 
  totalVolumeUSD: BigDecimal! # âœ… added 
  totalAUMUSD: BigDecimal!  # âœ… added 

  txCount: BigInt! # âœ… added 
}